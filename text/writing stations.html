<!-- HTML file used for uploading JSON data to the firestore. -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload JSON to Firestore</title>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
  <script>
    // Your Firebase configuration and initialization code here
    const firebaseConfig = {
    apiKey: "AIzaSyDr1vA3wOtKq01WABZTtnjKeUOn-Yc17ko",
    authDomain: "transitaura.firebaseapp.com",
    projectId: "transitaura",
    storageBucket: "transitaura.firebasestorage.app",
    messagingSenderId: "522264051253",
    appId: "1:522264051253:web:e4ec773e80453c7b52bb7c",
    measurementId: "G-FD02KS68HH"
  };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const fetchJSONData = async () => {
      const response = await fetch("../transformed-bus-routes.json");
      if (!response.ok) {
        throw new Error("Failed to fetch JSON data");
      }
      return await response.json();
    };

    const uploadJSONToFirestore = async () => {
      try {
        const jsonData = await fetchJSONData();
        for (const route of jsonData) {
          const documentName = `${route.routeNumber} - ${route.routeName}`;
          await db.collection("routes").doc(documentName).set(route);
          console.log(`Document ${documentName} written successfully!`);
        }
        alert("All JSON data has been uploaded successfully!");
      } catch (error) {
        console.error("Error writing document: ", error);
        alert("An error occurred while uploading the data.");
      }
    };

    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("uploadButton").addEventListener("click", uploadJSONToFirestore);
    });
  </script>
</head>
<body>
  <h1>Upload JSON Data to Firestore</h1>
  <button id="uploadButton">Upload JSON Data</button>
</body>
</html>
